<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Detective - Knowledge Graph (27 nodes)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            color: #333;
        }
        
        /* Fixed header */
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }
        header h1 {
            font-size: 1.5rem;
            font-weight: 700;
        }
        .stats {
            display: flex;
            gap: 1.5rem;
            font-size: 0.9rem;
        }
        .stat {
            background: rgba(255,255,255,0.15);
            padding: 0.5rem 1rem;
            border-radius: 6px;
        }
        .stat-value {
            font-weight: 700;
            font-size: 1.1rem;
        }
        
        /* Controls bar */
        .controls {
            position: fixed;
            top: 70px;
            left: 0;
            right: 0;
            z-index: 999;
            background: white;
            padding: 0.75rem 2rem;
            display: flex;
            gap: 1rem;
            align-items: center;
            border-bottom: 1px solid #ddd;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .controls button {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
        }
        .controls button:hover {
            transform: translateY(-1px);
        }
        .btn-primary {
            background: #2563eb;
            color: white;
        }
        .btn-secondary {
            background: #e5e7eb;
            color: #374151;
        }
        .zoom-info {
            margin-left: auto;
            color: #666;
            font-size: 0.85rem;
        }
        
        /* Main diagram area - scrollable */
        main {
            margin-top: 130px;
            padding: 2rem;
            min-height: calc(100vh - 130px);
        }
        .diagram-wrapper {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            padding: 2rem;
            overflow: auto;
        }
        .mermaid {
            min-width: max-content;
        }
        .mermaid svg {
            max-width: none !important;
            height: auto !important;
        }
        
        /* Node styling */
        .node rect {
            stroke-width: 2px !important;
        }
        .node .label {
            font-size: 14px !important;
        }
        .edgeLabel {
            font-size: 12px !important;
            font-weight: 600 !important;
            background: white !important;
            padding: 2px 6px !important;
            border-radius: 4px !important;
        }
        
        /* Legend */
        .legend {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            font-size: 0.85rem;
            z-index: 100;
        }
        .legend h3 {
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            color: #666;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin: 0.3rem 0;
        }
        .legend-shape {
            width: 20px;
            height: 14px;
            border: 2px solid #333;
        }
        .shape-rect { border-radius: 2px; }
        .shape-rounded { border-radius: 7px; }
        .shape-parallelogram { 
            transform: skewX(-10deg);
            width: 24px;
        }
        
        /* Scroll indicator */
        .scroll-hint {
            text-align: center;
            padding: 1rem;
            color: #666;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <header>
        <h1>üìä Financial Detective</h1>
        <div class="stats">
            <div class="stat">
                <span class="stat-value">27</span> Nodes
            </div>
            <div class="stat">
                <span class="stat-value">14</span> Relationships
            </div>
        </div>
    </header>
    
    <div class="controls">
        <button class="btn-primary" onclick="zoomIn()">üîç Zoom In</button>
        <button class="btn-primary" onclick="zoomOut()">üîç Zoom Out</button>
        <button class="btn-secondary" onclick="resetZoom()">‚Ü∫ Reset</button>
        <button class="btn-secondary" onclick="scrollToTop()">‚¨Ü Top</button>
        <button class="btn-secondary" onclick="scrollToBottom()">‚¨á Bottom</button>
        <span class="zoom-info">Scroll to navigate ‚Ä¢ Use zoom buttons to resize</span>
    </div>
    
    <main>
        <div class="scroll-hint">‚¨á Scroll down to explore the full graph ‚¨á</div>
        <div class="diagram-wrapper" id="diagram">
            <pre class="mermaid" id="mermaid-diagram">
flowchart TD

    %% Node definitions
    amount_1[/"$3 billion"/]
    company_1["Reliance Retail"]
    amount_2[/"~1.4 Billion"/]
    amount_3[/"$1 billion"/]
    company_2["RIL"]
    risk_1("volatility")
    company_3["SandP"]
    company_4["Moody‚Äôs"]
    company_5["CRISIL"]
    company_6["CARE"]
    company_7["ICRA"]
    company_8["India Ratings"]
    amount_4[/"' 190 lakh crore"/]
    company_9["Boston Consulting Group"]
    company_10["Retailers Association of India"]
    company_11["KG D6"]
    company_12["Coal Bed Methane"]
    amount_5[/"25,211"/]
    amount_6[/"24,439"/]
    amount_7[/"21,188"/]
    amount_8[/"20,191"/]
    company_13["bp"]
    amount_9[/"~240 BCF"/]
    company_14["Reliance Gas Pipeline Limited"]
    risk_2("Liquidity Risk")
    company_15["Reliance Industries Limited"]
    risk_3("counterparties‚Äô credit risk")

    %% Relationships
    company_2 -->|REPORTS_AMOUNT| amount_1
    company_2 -->|OWNS| company_1
    company_2 -->|REPORTS_AMOUNT| amount_3
    company_2 -->|HAS_RISK| risk_1
    company_2 -->|OWNS| company_14
    company_3 -->|SUPPORTED_BY| company_2
    company_4 -->|SUPPORTED_BY| company_2
    company_5 -->|SUPPORTED_BY| company_2
    company_6 -->|SUPPORTED_BY| company_2
    company_7 -->|SUPPORTED_BY| company_2
    company_8 -->|SUPPORTED_BY| company_2
    company_2 -->|PARTNERED_WITH| company_13
    company_15 -->|HAS_RISK| risk_2
    company_15 -->|HAS_RISK| risk_3
            </pre>
        </div>
        <div class="scroll-hint">‚¨Ü Scroll up to return to the top ‚¨Ü</div>
    </main>
    
    <div class="legend">
        <h3>Legend</h3>
        <div class="legend-item">
            <div class="legend-shape shape-rect"></div>
            <span>Company</span>
        </div>
        <div class="legend-item">
            <div class="legend-shape shape-rounded"></div>
            <span>Risk Factor</span>
        </div>
        <div class="legend-item">
            <div class="legend-shape shape-parallelogram"></div>
            <span>Dollar Amount</span>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>
        let currentZoom = 1;
        
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            maxTextSize: 500000,
            maxEdges: 5000,
            flowchart: {
                useMaxWidth: false,
                htmlLabels: true,
                curve: 'basis',
                nodeSpacing: 50,
                rankSpacing: 70,
                padding: 15
            },
            themeVariables: {
                fontSize: '14px',
                fontFamily: '-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif'
            }
        });
        
        function zoomIn() {
            currentZoom = Math.min(currentZoom + 0.2, 3);
            applyZoom();
        }
        
        function zoomOut() {
            currentZoom = Math.max(currentZoom - 0.2, 0.3);
            applyZoom();
        }
        
        function resetZoom() {
            currentZoom = 1;
            applyZoom();
        }
        
        function applyZoom() {
            const svg = document.querySelector('.mermaid svg');
            if (svg) {
                svg.style.transform = `scale(${currentZoom})`;
                svg.style.transformOrigin = 'top left';
            }
        }
        
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        function scrollToBottom() {
            window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        }
    </script>
</body>
</html>
